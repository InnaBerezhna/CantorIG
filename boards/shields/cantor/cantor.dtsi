/*
 * Copyright (c) 2024 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 *
 * Cantor keyboard – 42-key diodeless split (3x6 + 3 thumb per side).
 * Uses a 5-column matrix transform to match the Corne 5-col layout,
 * dropping the outermost column on each half.
 *
 * Direct-pin kscan positions per half (21 keys each):
 *   0-5   row 0  (outer → inner)
 *   6-11  row 1
 *   12-17 row 2
 *   18-20 thumb keys
 *
 * Both halves use the SAME pin order (B1, B10, A8, …).
 * The right half applies col-offset=<21> so its columns become 21-41.
 * The transform map mirrors the right side (inner-first) to match the
 * keymap's left-then-right ordering per row.
 */

#include <dt-bindings/zmk/matrix_transform.h>
#include <dt-bindings/gpio/gpio.h>

/ {
    chosen {
        zmk,kscan = &kscan0;
        zmk,matrix-transform = &five_col_transform;
    };

    /*
     * 5-column transform (36 keys) – identical key count to the Corne 5-col.
     *
     * Left  cols 0-20  (no offset):  skip 0/6/12 (outer), use 1-5, 7-11, 13-17, 18-20.
     * Right cols 21-41 (col-offset=21): skip 21/27/33 (outer=B1), use inner-first
     *   i.e. 26,25,24,23,22 / 32,31,30,29,28 / 38,37,36,35,34 / 41,40,39.
     */
    five_col_transform: keymap_transform_0 {
        compatible = "zmk,matrix-transform";
        columns = <42>;
        rows = <1>;
        map = <
            RC(0,1)  RC(0,2)  RC(0,3)  RC(0,4)  RC(0,5)      RC(0,26) RC(0,25) RC(0,24) RC(0,23) RC(0,22)
            RC(0,7)  RC(0,8)  RC(0,9)  RC(0,10) RC(0,11)     RC(0,32) RC(0,31) RC(0,30) RC(0,29) RC(0,28)
            RC(0,13) RC(0,14) RC(0,15) RC(0,16) RC(0,17)     RC(0,38) RC(0,37) RC(0,36) RC(0,35) RC(0,34)
                              RC(0,18) RC(0,19) RC(0,20)     RC(0,41) RC(0,40) RC(0,39)
        >;
    };
};
